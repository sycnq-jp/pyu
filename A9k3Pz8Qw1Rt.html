<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typing Game Pro</title>
<style>
body {
    background: linear-gradient(135deg, #1e1e2f, #252547);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}
.game-container {
    text-align: center;
    background: rgba(255, 255, 255, 0.05);
    padding: 30px 50px;
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(0,0,0,0.3);
    width: 90%;
    max-width: 600px;
}
h1 {
    margin-bottom: 15px;
    font-size: 2.5rem;
}
#score {
    font-size: 1.2rem;
    margin-bottom: 20px;
}
#word-container {
    font-size: 2rem;
    margin-bottom: 20px;
    min-height: 50px;
    word-wrap: break-word;
}
#correct { color: #4caf50; }
#incorrect { color: #f44336; }
#remaining { color: #aaaaaa; }
#input {
    font-size: 1.5rem;
    padding: 10px;
    border-radius: 8px;
    border: none;
    outline: none;
    width: 80%;
    max-width: 300px;
    text-align: center;
}
</style>
</head>
<body>
<div class="game-container">
    <h1>Typing Game Pro</h1>
    <div id="score">Score: 0 / 0</div>
    <div id="word-container">
        <span id="correct"></span><span id="incorrect"></span><span id="remaining"></span>
    </div>
    <input type="text" id="input" autofocus placeholder="Type here...">
</div>
<script>
let words = [];
let usedWords = [];
let currentWord = "";
let score = 0;
let total = 0;

const correctSpan = document.getElementById("correct");
const incorrectSpan = document.getElementById("incorrect");
const remainingSpan = document.getElementById("remaining");
const input = document.getElementById("input");
const scoreDisplay = document.getElementById("score");

async function loadWords() {
    const res = await fetch("words.json");
    words = await res.json();
    nextWord();
}

function nextWord() {
    if (usedWords.length === words.length) {
        alert("No more words!");
        return;
    }
    let word;
    do {
        word = words[Math.floor(Math.random() * words.length)];
    } while (usedWords.includes(word));
    usedWords.push(word);
    currentWord = word;
    correctSpan.textContent = "";
    incorrectSpan.textContent = "";
    remainingSpan.textContent = currentWord;
    input.value = "";
    total++;
    updateScore();
}

function updateScore() {
    scoreDisplay.textContent = `Score: ${score} / ${total - 1}`;
}

input.addEventListener("input", () => {
    const typed = input.value;
    let correctPart = "";
    let incorrectPart = "";
    for (let i = 0; i < typed.length; i++) {
        if (typed[i] === currentWord[i]) {
            correctPart += typed[i];
        } else {
            incorrectPart = currentWord[i] || "";
            correctSpan.textContent = correctPart;
            incorrectSpan.textContent = incorrectPart;
            remainingSpan.textContent = currentWord.slice(i + 1);
            return;
        }
    }
    correctSpan.textContent = correctPart;
    incorrectSpan.textContent = "";
    remainingSpan.textContent = currentWord.slice(typed.length);

    if (typed === currentWord) {
        score++;
        nextWord();
    }
});

loadWords();
</script>
</body>
</html>
